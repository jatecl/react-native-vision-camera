{"version":3,"names":["useCallback","capturableConsole","console","useFrameProcessor","frameProcessor","dependencies","frame","global","didSetConsole","debug","__callAsync","log","warn","error","info","_setGlobalConsole"],"sources":["useFrameProcessor.ts"],"sourcesContent":["/* global _setGlobalConsole */\n\nimport { DependencyList, useCallback } from 'react';\nimport type { Frame } from '../Frame';\n\ntype FrameProcessor = (frame: Frame) => void;\n\nconst capturableConsole = console;\n\n/**\n * Returns a memoized Frame Processor function wich you can pass to the `<Camera>`. (See [\"Frame Processors\"](https://mrousavy.github.io/react-native-vision-camera/docs/guides/frame-processors))\n *\n * Make sure to add the `'worklet'` directive to the top of the Frame Processor function, otherwise it will not get compiled into a worklet.\n *\n * @param frameProcessor The Frame Processor\n * @param dependencies The React dependencies which will be copied into the VisionCamera JS-Runtime.\n * @returns The memoized Frame Processor.\n * @example\n * ```ts\n * const frameProcessor = useFrameProcessor((frame) => {\n *   'worklet'\n *   const qrCodes = scanQRCodes(frame)\n *   console.log(`QR Codes: ${qrCodes}`)\n * }, [])\n * ```\n */\nexport function useFrameProcessor(frameProcessor: FrameProcessor, dependencies: DependencyList): FrameProcessor {\n  return useCallback((frame: Frame) => {\n    'worklet';\n\n    // @ts-expect-error\n    if (global.didSetConsole == null || global.didSetConsole === false) {\n      const console = {\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        debug: capturableConsole.debug.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        log: capturableConsole.log.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        warn: capturableConsole.warn.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        error: capturableConsole.error.__callAsync,\n        // @ts-expect-error __callAsync is injected by native REA\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        info: capturableConsole.info.__callAsync,\n      };\n      // @ts-expect-error _setGlobalConsole is set by RuntimeDecorator::decorateRuntime\n      _setGlobalConsole(console);\n      // @ts-expect-error\n      global.didSetConsole = true;\n    }\n\n    frameProcessor(frame);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n}\n"],"mappings":"AAAA;;AAEA,SAAyBA,WAAW,QAAQ,OAAO;AAKnD,MAAMC,iBAAiB,GAAGC,OAAO;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiB,CAACC,cAA8B,EAAEC,YAA4B,EAAkB;EAC9G,OAAOL,WAAW,CAAEM,KAAY,IAAK;IACnC,SAAS;;IAET;IACA,IAAIC,MAAM,CAACC,aAAa,IAAI,IAAI,IAAID,MAAM,CAACC,aAAa,KAAK,KAAK,EAAE;MAClE,MAAMN,OAAO,GAAG;QACd;QACA;QACAO,KAAK,EAAER,iBAAiB,CAACQ,KAAK,CAACC,WAAW;QAC1C;QACA;QACAC,GAAG,EAAEV,iBAAiB,CAACU,GAAG,CAACD,WAAW;QACtC;QACA;QACAE,IAAI,EAAEX,iBAAiB,CAACW,IAAI,CAACF,WAAW;QACxC;QACA;QACAG,KAAK,EAAEZ,iBAAiB,CAACY,KAAK,CAACH,WAAW;QAC1C;QACA;QACAI,IAAI,EAAEb,iBAAiB,CAACa,IAAI,CAACJ;MAC/B,CAAC;MACD;MACAK,iBAAiB,CAACb,OAAO,CAAC;MAC1B;MACAK,MAAM,CAACC,aAAa,GAAG,IAAI;IAC7B;IAEAJ,cAAc,CAACE,KAAK,CAAC;IACrB;EACF,CAAC,EAAED,YAAY,CAAC;AAClB"}