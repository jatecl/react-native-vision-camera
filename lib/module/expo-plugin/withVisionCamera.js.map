{"version":3,"names":["withPlugins","AndroidConfig","createRunOncePlugin","withDisableFrameProcessorsAndroid","withDisableFrameProcessorsIOS","pkg","require","CAMERA_USAGE","MICROPHONE_USAGE","withCamera","config","props","ios","infoPlist","NSCameraUsageDescription","cameraPermissionText","enableMicrophonePermission","NSMicrophoneUsageDescription","microphonePermissionText","androidPermissions","push","disableFrameProcessors","Permissions","withPermissions","name","version"],"sources":["withVisionCamera.ts"],"sourcesContent":["import { withPlugins, AndroidConfig, ConfigPlugin, createRunOncePlugin } from '@expo/config-plugins';\nimport { withDisableFrameProcessorsAndroid } from './withDisableFrameProcessorsAndroid';\nimport { withDisableFrameProcessorsIOS } from './withDisableFrameProcessorsIOS';\n// eslint-disable-next-line @typescript-eslint/no-var-requires, @typescript-eslint/no-unsafe-assignment\nconst pkg = require('../../../package.json');\n\nconst CAMERA_USAGE = 'Allow $(PRODUCT_NAME) to access your camera';\nconst MICROPHONE_USAGE = 'Allow $(PRODUCT_NAME) to access your microphone';\n\ntype Props = {\n  cameraPermissionText?: string;\n  enableMicrophonePermission?: boolean;\n  microphonePermissionText?: string;\n  disableFrameProcessors?: boolean;\n};\n\nconst withCamera: ConfigPlugin<Props> = (config, props = {}) => {\n  if (config.ios == null) config.ios = {};\n  if (config.ios.infoPlist == null) config.ios.infoPlist = {};\n  config.ios.infoPlist.NSCameraUsageDescription =\n    props.cameraPermissionText ?? (config.ios.infoPlist.NSCameraUsageDescription as string | undefined) ?? CAMERA_USAGE;\n  if (props.enableMicrophonePermission) {\n    config.ios.infoPlist.NSMicrophoneUsageDescription =\n      props.microphonePermissionText ?? (config.ios.infoPlist.NSMicrophoneUsageDescription as string | undefined) ?? MICROPHONE_USAGE;\n  }\n  const androidPermissions = ['android.permission.CAMERA'];\n  if (props.enableMicrophonePermission) androidPermissions.push('android.permission.RECORD_AUDIO');\n\n  if (props.disableFrameProcessors) {\n    config = withDisableFrameProcessorsAndroid(config);\n    config = withDisableFrameProcessorsIOS(config);\n  }\n\n  return withPlugins(config, [[AndroidConfig.Permissions.withPermissions, androidPermissions]]);\n};\n\nexport default createRunOncePlugin(withCamera, pkg.name, pkg.version);\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,aAAa,EAAgBC,mBAAmB,QAAQ,sBAAsB;AACpG,SAASC,iCAAiC,QAAQ,qCAAqC;AACvF,SAASC,6BAA6B,QAAQ,iCAAiC;AAC/E;AACA,MAAMC,GAAG,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AAE5C,MAAMC,YAAY,GAAG,6CAA6C;AAClE,MAAMC,gBAAgB,GAAG,iDAAiD;AAS1E,MAAMC,UAA+B,GAAG,UAACC,MAAM,EAAiB;EAAA;EAAA,IAAfC,KAAK,uEAAG,CAAC,CAAC;EACzD,IAAID,MAAM,CAACE,GAAG,IAAI,IAAI,EAAEF,MAAM,CAACE,GAAG,GAAG,CAAC,CAAC;EACvC,IAAIF,MAAM,CAACE,GAAG,CAACC,SAAS,IAAI,IAAI,EAAEH,MAAM,CAACE,GAAG,CAACC,SAAS,GAAG,CAAC,CAAC;EAC3DH,MAAM,CAACE,GAAG,CAACC,SAAS,CAACC,wBAAwB,oCAC3CH,KAAK,CAACI,oBAAoB,yEAAKL,MAAM,CAACE,GAAG,CAACC,SAAS,CAACC,wBAAwB,uCAA2BP,YAAY;EACrH,IAAII,KAAK,CAACK,0BAA0B,EAAE;IAAA;IACpCN,MAAM,CAACE,GAAG,CAACC,SAAS,CAACI,4BAA4B,qCAC/CN,KAAK,CAACO,wBAAwB,yEAAKR,MAAM,CAACE,GAAG,CAACC,SAAS,CAACI,4BAA4B,yCAA2BT,gBAAgB;EACnI;EACA,MAAMW,kBAAkB,GAAG,CAAC,2BAA2B,CAAC;EACxD,IAAIR,KAAK,CAACK,0BAA0B,EAAEG,kBAAkB,CAACC,IAAI,CAAC,iCAAiC,CAAC;EAEhG,IAAIT,KAAK,CAACU,sBAAsB,EAAE;IAChCX,MAAM,GAAGP,iCAAiC,CAACO,MAAM,CAAC;IAClDA,MAAM,GAAGN,6BAA6B,CAACM,MAAM,CAAC;EAChD;EAEA,OAAOV,WAAW,CAACU,MAAM,EAAE,CAAC,CAACT,aAAa,CAACqB,WAAW,CAACC,eAAe,EAAEJ,kBAAkB,CAAC,CAAC,CAAC;AAC/F,CAAC;AAED,eAAejB,mBAAmB,CAACO,UAAU,EAAEJ,GAAG,CAACmB,IAAI,EAAEnB,GAAG,CAACoB,OAAO,CAAC"}