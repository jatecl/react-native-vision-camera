{"version":3,"names":["withXcodeProject","withDisableFrameProcessorsIOS","c","config","xcodeProject","modResults","configurations","pbxXCBuildConfigurationSection","inheritKey","valueKey","key","buildSettings","preprocessorDefinitions","GCC_PREPROCESSOR_DEFINITIONS","includes","push"],"sources":["withDisableFrameProcessorsIOS.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { ConfigPlugin, withXcodeProject, XcodeProject } from '@expo/config-plugins';\n\n/**\n * Set the `disableFrameProcessors` inside of the XcodeProject.\n * This is used to disable frame processors if you don't need it on iOS. (will save CPU and Memory)\n */\nexport const withDisableFrameProcessorsIOS: ConfigPlugin = (c) => {\n  return withXcodeProject(c, (config) => {\n    const xcodeProject: XcodeProject = config.modResults;\n\n    const configurations = xcodeProject.pbxXCBuildConfigurationSection();\n\n    const inheritKey = '\"$(inherited)\"';\n    const valueKey = '\"VISION_CAMERA_DISABLE_FRAME_PROCESSORS=1\"';\n\n    for (const key in configurations) {\n      const buildSettings = configurations[key].buildSettings;\n      if (buildSettings == null) continue;\n\n      const preprocessorDefinitions = (buildSettings.GCC_PREPROCESSOR_DEFINITIONS ?? [inheritKey]) as string[];\n\n      if (!preprocessorDefinitions.includes(valueKey)) preprocessorDefinitions.push(valueKey);\n      buildSettings.GCC_PREPROCESSOR_DEFINITIONS = preprocessorDefinitions;\n    }\n    return config;\n  });\n};\n"],"mappings":"AAAA;AACA,SAAuBA,gBAAgB,QAAsB,sBAAsB;;AAEnF;AACA;AACA;AACA;AACA,OAAO,MAAMC,6BAA2C,GAAIC,CAAC,IAAK;EAChE,OAAOF,gBAAgB,CAACE,CAAC,EAAGC,MAAM,IAAK;IACrC,MAAMC,YAA0B,GAAGD,MAAM,CAACE,UAAU;IAEpD,MAAMC,cAAc,GAAGF,YAAY,CAACG,8BAA8B,EAAE;IAEpE,MAAMC,UAAU,GAAG,gBAAgB;IACnC,MAAMC,QAAQ,GAAG,4CAA4C;IAE7D,KAAK,MAAMC,GAAG,IAAIJ,cAAc,EAAE;MAAA;MAChC,MAAMK,aAAa,GAAGL,cAAc,CAACI,GAAG,CAAC,CAACC,aAAa;MACvD,IAAIA,aAAa,IAAI,IAAI,EAAE;MAE3B,MAAMC,uBAAuB,4BAAID,aAAa,CAACE,4BAA4B,yEAAI,CAACL,UAAU,CAAc;MAExG,IAAI,CAACI,uBAAuB,CAACE,QAAQ,CAACL,QAAQ,CAAC,EAAEG,uBAAuB,CAACG,IAAI,CAACN,QAAQ,CAAC;MACvFE,aAAa,CAACE,4BAA4B,GAAGD,uBAAuB;IACtE;IACA,OAAOT,MAAM;EACf,CAAC,CAAC;AACJ,CAAC"}